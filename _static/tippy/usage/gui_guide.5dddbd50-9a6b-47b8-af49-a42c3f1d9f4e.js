selector_to_html = {"a[href=\"#opening-data\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Opening Data<a class=\"headerlink\" href=\"#opening-data\" title=\"Link to this heading\">#</a></h2><h3>Open File vs Select Folder<a class=\"headerlink\" href=\"#open-file-vs-select-folder\" title=\"Link to this heading\">#</a></h3>", "a[href=\"#supported-formats\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Supported Formats<a class=\"headerlink\" href=\"#supported-formats\" title=\"Link to this heading\">#</a></h3>", "a[href=\"#frame-averaging\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Frame Averaging<a class=\"headerlink\" href=\"#frame-averaging\" title=\"Link to this heading\">#</a></h3><p>Available for piezo z-stack data. When <code class=\"docutils literal notranslate\"><span class=\"pre\">frames_per_slice</span> <span class=\"pre\">&gt;</span> <span class=\"pre\">1</span></code>, toggle averaging based on ScanImage\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">logAverageFactor</span></code>. This changes the effective shape of the data.</p>", "a[href=\"#options\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Options<a class=\"headerlink\" href=\"#options\" title=\"Link to this heading\">#</a></h3>", "a[href=\"#keyboard-shortcuts\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Keyboard Shortcuts<a class=\"headerlink\" href=\"#keyboard-shortcuts\" title=\"Link to this heading\">#</a></h3><p>Press <code class=\"docutils literal notranslate\"><span class=\"pre\">k</span></code> in the GUI to see this list at any time.</p>", "a[href=\"#metadata-viewer\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Metadata Viewer<a class=\"headerlink\" href=\"#metadata-viewer\" title=\"Link to this heading\">#</a></h2><p>Toggle with <code class=\"docutils literal notranslate\"><span class=\"pre\">m</span></code> or the <strong>Metadata</strong> button in the status bar.</p>", "a[href=\"#preview-controls\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Preview Controls<a class=\"headerlink\" href=\"#preview-controls\" title=\"Link to this heading\">#</a></h2><h3>Window Functions<a class=\"headerlink\" href=\"#window-functions\" title=\"Link to this heading\">#</a></h3><p>Apply temporal projections over a sliding window of frames.</p>", "a[href=\"#external-tools\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">External Tools<a class=\"headerlink\" href=\"#external-tools\" title=\"Link to this heading\">#</a></h3><p>The GUI can launch external tools when installed:</p>", "a[href=\"#process-manager\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Process Manager<a class=\"headerlink\" href=\"#process-manager\" title=\"Link to this heading\">#</a></h2><p>Click the status indicator in the menu bar to open the process console.</p><p>The status indicator is color-coded:</p>", "a[href=\"#metadata\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Metadata<a class=\"headerlink\" href=\"#metadata\" title=\"Link to this heading\">#</a></h3><p>The save dialog includes a metadata editor:</p>", "a[href=\"#gui-user-guide\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\">GUI User Guide<a class=\"headerlink\" href=\"#gui-user-guide\" title=\"Link to this heading\">#</a></h1><p>Interactive data preview and processing tools for calcium imaging data.</p>", "a[href=\"#selection\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Selection<a class=\"headerlink\" href=\"#selection\" title=\"Link to this heading\">#</a></h3><p>The save dialog provides dimension-specific subsetting:</p>", "a[href=\"#scan-phase-correction\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Scan-Phase Correction<a class=\"headerlink\" href=\"#scan-phase-correction\" title=\"Link to this heading\">#</a></h3><p>Preview bidirectional raster-scan phase correction before saving. Only available for ScanImage data.</p>", "a[href=\"#menu-bar\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Menu Bar<a class=\"headerlink\" href=\"#menu-bar\" title=\"Link to this heading\">#</a></h3>", "a[href=\"#window-functions\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Window Functions<a class=\"headerlink\" href=\"#window-functions\" title=\"Link to this heading\">#</a></h3><p>Apply temporal projections over a sliding window of frames.</p>", "a[href=\"#zarr-specific-options\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Zarr-Specific Options<a class=\"headerlink\" href=\"#zarr-specific-options\" title=\"Link to this heading\">#</a></h3>", "a[href=\"#results-and-diagnostics\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Results and Diagnostics<a class=\"headerlink\" href=\"#results-and-diagnostics\" title=\"Link to this heading\">#</a></h3>", "a[href=\"#time-series-viewer\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Time-Series Viewer<a class=\"headerlink\" href=\"#time-series-viewer\" title=\"Link to this heading\">#</a></h3><p>The default viewer for calcium imaging data (TZYX). Used for ScanImage TIFFs, standard TIFFs, ImageJ hyperstacks, and other volumetric data.</p><p>Features:</p>", "a[href=\"#load-options\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Load Options<a class=\"headerlink\" href=\"#load-options\" title=\"Link to this heading\">#</a></h3>", "a[href=\"#navigation\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Navigation<a class=\"headerlink\" href=\"#navigation\" title=\"Link to this heading\">#</a></h2><h3>Keyboard Shortcuts<a class=\"headerlink\" href=\"#keyboard-shortcuts\" title=\"Link to this heading\">#</a></h3><p>Press <code class=\"docutils literal notranslate\"><span class=\"pre\">k</span></code> in the GUI to see this list at any time.</p>", "a[href=\"#spatial-crop\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Spatial Crop<a class=\"headerlink\" href=\"#spatial-crop\" title=\"Link to this heading\">#</a></h3>", "a[href=\"#quick-start\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Quick Start<a class=\"headerlink\" href=\"#quick-start\" title=\"Link to this heading\">#</a></h2><p>From Python:</p>", "a[href=\"#suite2p-integration\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Suite2p Integration<a class=\"headerlink\" href=\"#suite2p-integration\" title=\"Link to this heading\">#</a></h2><p>Available when <code class=\"docutils literal notranslate\"><span class=\"pre\">suite2p</span></code> is installed. Access via the processing pipeline panel.</p>", "a[href=\"#visualization\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Visualization<a class=\"headerlink\" href=\"#visualization\" title=\"Link to this heading\">#</a></h3><p>The z-stats panel adapts to the data:</p>", "a[href=\"#open-file-vs-select-folder\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Open File vs Select Folder<a class=\"headerlink\" href=\"#open-file-vs-select-folder\" title=\"Link to this heading\">#</a></h3>", "a[href=\"#pollen-calibration-viewer\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Pollen Calibration Viewer<a class=\"headerlink\" href=\"#pollen-calibration-viewer\" title=\"Link to this heading\">#</a></h3><p>Specialized viewer for LBM beamlet calibration data (<code class=\"docutils literal notranslate\"><span class=\"pre\">stack_type</span> <span class=\"pre\">==</span> <span class=\"pre\">\"pollen\"</span></code>). Automatically selected when pollen calibration data is loaded.</p><p>Features:</p>", "a[href=\"#z-stats\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Z-Stats<a class=\"headerlink\" href=\"#z-stats\" title=\"Link to this heading\">#</a></h2><p>Per-z-plane signal quality statistics, computed in the background on load.</p>", "a[href=\"#viewers\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Viewers<a class=\"headerlink\" href=\"#viewers\" title=\"Link to this heading\">#</a></h2><p>The GUI selects a viewer automatically based on the data type.</p>", "a[href=\"#metrics\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Metrics<a class=\"headerlink\" href=\"#metrics\" title=\"Link to this heading\">#</a></h3>", "a[href=\"#saving-data\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Saving Data<a class=\"headerlink\" href=\"#saving-data\" title=\"Link to this heading\">#</a></h2><p>Open via <strong>File &gt; Save As</strong> or press <code class=\"docutils literal notranslate\"><span class=\"pre\">s</span></code>.</p>", "a[href=\"#output-formats\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Output Formats<a class=\"headerlink\" href=\"#output-formats\" title=\"Link to this heading\">#</a></h3>"}
skip_classes = ["headerlink", "sd-stretched-link"]

window.onload = function () {
    for (const [select, tip_html] of Object.entries(selector_to_html)) {
        const links = document.querySelectorAll(` ${select}`);
        for (const link of links) {
            if (skip_classes.some(c => link.classList.contains(c))) {
                continue;
            }

            tippy(link, {
                content: tip_html,
                allowHTML: true,
                arrow: true,
                placement: 'auto-start', maxWidth: 500, interactive: false,

            });
        };
    };
    console.log("tippy tips loaded!");
};
