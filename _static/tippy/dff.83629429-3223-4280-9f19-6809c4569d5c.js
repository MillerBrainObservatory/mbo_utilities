selector_to_html = {"a[href=\"https://doi.org/10.1101/061507\"]": "\n<div>\n    <h3>Suite2p: beyond 10,000 neurons with standard two-photon microscopy</h3>\n    \n    <p><b>Authors:</b> Marius Pachitariu, Carsen Stringer, Mario Dipoppa, Sylvia Schr\u00f6der, L. Federico Rossi, Henry Dalgleish, Matteo Carandini, Kenneth D. Harris</p>\n    \n    <p><b>Publisher:</b> Cold Spring Harbor Laboratory</p>\n    <p><b>Published:</b> 2016-7-1</p>\n</div>", "a[href=\"https://doi.org/10.7554/eLife.51675\"]": "\n<div>\n    <h3>Relationship between simultaneously recorded spiking activity and fluorescence signal in GCaMP6 transgenic mice</h3>\n    \n    <p><b>Authors:</b> Lawrence Huang, Peter Ledochowitsch, Ulf Knoblich, J\u00e9r\u00f4me Lecoq, Gabe J Murphy, R Clay Reid, Saskia EJ de Vries, Christof Koch, Hongkui Zeng, Michael A Buice, Jack Waters, Lu Li</p>\n    \n    <p><b>Publisher:</b> eLife Sciences Publications, Ltd</p>\n    <p><b>Published:</b> 2021-3-8</p>\n</div>", "a[href=\"https://doi.org/10.1109/TPAMI.2011.217\"]": "\n<div>\n    <h3>Constrained Nonnegative Matrix Factorization for Image Representation</h3>\n    \n    <p><b>Authors:</b> Haifeng Liu, Zhaohui Wu, Deng Cai, Thomas S. Huang</p>\n    \n    <p><b>Publisher:</b> Institute of Electrical and Electronics Engineers (IEEE)</p>\n    <p><b>Published:</b> 2011-11-8</p>\n</div>", "a[href=\"https://doi.org/10.7554/eLife.38173\"]": "\n<div>\n    <h3>CaImAn an open source tool for scalable calcium imaging data analysis</h3>\n    \n    <p><b>Authors:</b> Andrea Giovannucci, Johannes Friedrich, Pat Gunn, J\u00e9r\u00e9mie Kalfon, Brandon L Brown, Sue Ann Koay, Jiannis Taxidis, Farzaneh Najafi, Jeffrey L Gauthier, Pengcheng Zhou, Baljit S Khakh, David W Tank, Dmitri B Chklovskii, Eftychios A Pnevmatikakis</p>\n    \n    <p><b>Publisher:</b> eLife Sciences Publications, Ltd</p>\n    <p><b>Published:</b> 2019-1-14</p>\n</div>", "a[href=\"https://doi.org/10.1101/2021.03.24.436279\"]": "\n<div>\n    <h3>Fast, scalable, and statistically robust cell extraction from large-scale neural calcium imaging datasets</h3>\n    \n    <p><b>Authors:</b> Fatih Dinc, Hakan Inan, Oscar Hernandez, Claudia Schmuckermair, Omer Hazon, Tugce Tasci, Biafra O. Ahanonu, Yanping Zhang, Jerome Lecoq, Simon Haziza, Mark J. Wagner, Murat A. Erdogdu, Mark J. Schnitzer</p>\n    \n    <p><b>Publisher:</b> Cold Spring Harbor Laboratory</p>\n    <p><b>Published:</b> 2021-3-26</p>\n</div>", "a[href=\"https://doi.org/10.1101/2025.03.03.641129\"]": "\n<div>\n    <h3>Spike inference from calcium imaging data acquired with GCaMP8 indicators</h3>\n    \n    <p><b>Authors:</b> Peter Rupprecht, M\u00e1rton R\u00f3zsa, Xusheng Fang, Karel Svoboda, Fritjof Helmchen</p>\n    \n    <p><b>Publisher:</b> Cold Spring Harbor Laboratory</p>\n    <p><b>Published:</b> 2025-3-10</p>\n</div>", "a[href=\"https://doi.org/10.1101/2024.07.17.603957\"]": "\n<div>\n    <h3>Spike rate inference from mouse spinal cord calcium imaging data</h3>\n    \n    <p><b>Authors:</b> Peter Rupprecht, Wei Fan, Steve J. Sullivan, Fritjof Helmchen, Andrei D. Sdrulla</p>\n    \n    <p><b>Publisher:</b> Cold Spring Harbor Laboratory</p>\n    <p><b>Published:</b> 2024-7-22</p>\n</div>", "a[href=\"#fig-dff-dff-ev\"]": "<figure class=\"full-width align-default\" id=\"fig-dff-dff-ev\">\n<img alt=\"Resulting DFF values from baseline strategies with Events\" src=\"_images/dff_baseline_strategies_events.png\"/>\n<figcaption>\n<p><span class=\"caption-text\">The resulting \u0394F/F\u2080 traces can look different depending on the chosen baseline strategy.</span><a class=\"headerlink\" href=\"#fig-dff-dff-ev\" title=\"Link to this image\">#</a></p>\n</figcaption>\n</figure>", "a[href=\"#standardized-noise-levels\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Standardized Noise Levels<a class=\"headerlink\" href=\"#standardized-noise-levels\" title=\"Link to this heading\">#</a></h2><p>The resulting units, <code class=\"docutils literal notranslate\"><span class=\"pre\">%</span> <span class=\"pre\">for</span> <span class=\"pre\">dF/F,</span> <span class=\"pre\">divided</span> <span class=\"pre\">by</span> <span class=\"pre\">the</span> <span class=\"pre\">square</span> <span class=\"pre\">root</span> <span class=\"pre\">of</span> <span class=\"pre\">seconds</span></code>, is strange.</p><p>This metric should be used relative to other datasets.</p>", "a[href=\"#fig-dff-caiman\"]": "<figure class=\"full-width align-default\" id=\"fig-dff-caiman\">\n<img alt=\"CaImAn default DF/F strategy\" src=\"_images/dff_baseline_strategies_caiman.png\"/>\n<figcaption>\n<p><span class=\"caption-text\"><a class=\"reference external\" href=\"https://github.com/flatironinstitute/CaImAn\">CaImAn</a> uses a default baseline of the <code class=\"docutils literal notranslate\"><span class=\"pre\">lower</span> <span class=\"pre\">8th</span> <span class=\"pre\">percentile</span></code> and a moving window of <code class=\"docutils literal notranslate\"><span class=\"pre\">200</span> <span class=\"pre\">frames</span></code>.</span><a class=\"headerlink\" href=\"#fig-dff-caiman\" title=\"Link to this image\">#</a></p>\n</figcaption>\n</figure>", "a[href=\"#fig-dff-activity\"]": "<figure class=\"full-width align-default\" id=\"fig-dff-activity\">\n<img alt=\"Cell Activity (DF/F)\" src=\"_images/cell_activity.png\"/>\n<figcaption>\n<p><span class=\"caption-text\">\u0394F/F traces for 30 cells, sorted by similarity using the <a class=\"reference external\" href=\"https://github.com/MouseLand/rastermap\">Rastermap</a> algorithm.</span><a class=\"headerlink\" href=\"#fig-dff-activity\" title=\"Link to this image\">#</a></p>\n</figcaption>\n</figure>", "a[href=\"#caiman\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\"><a class=\"reference external\" href=\"https://github.com/flatironinstitute/CaImAn\">CaImAn</a><a class=\"headerlink\" href=\"#caiman\" title=\"Link to this heading\">#</a></h3><p>See: <a class=\"reference external\" href=\"https://caiman.readthedocs.io/en/latest/core_functions.html#caiman.source_extraction.cnmf.utilities.detrend_df_f\" title=\"(in CaImAn v1.12.2)\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">detrend_df_f</span></code></a></p><p>CaImAn computes \u0394F/F\u2080 using a <strong>running low-percentile baseline</strong>.</p>", "a[href=\"#baseline-f0-strategies\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Baseline F\u2080 Strategies<a class=\"headerlink\" href=\"#baseline-f0-strategies\" title=\"Link to this heading\">#</a></h2><p>Choosing the correct baseline strategy depends on many factors:</p>", "a[href=\"#fig-noise-high-low\"]": "<figure class=\"full-width align-default\" id=\"fig-noise-high-low\">\n<img alt=\"High vs Low Noise Levels\" src=\"_images/noise_comp.png\"/>\n<figcaption>\n<p><span class=\"caption-text\">Top N neurons with highest and lowest standardized noise levels.</span><a class=\"headerlink\" href=\"#fig-noise-high-low\" title=\"Link to this image\">#</a></p>\n</figcaption>\n</figure>", "a[href=\"#id20\"]": "<figure class=\"align-default\" id=\"id20\">\n<img alt=\"_images/dff_oasis.png\" src=\"_images/dff_oasis.png\"/>\n<figcaption>\n<p><span class=\"caption-text\">Raw, neuropil, \u0394F/F\u2080 and resulting deconvolved spikes as output by <a class=\"reference external\" href=\"https://github.com/MouseLand/suite2p\">Suite2p</a></span><a class=\"headerlink\" href=\"#id20\" title=\"Link to this image\">#</a></p>\n</figcaption>\n</figure>", "a[href=\"#quantifying-cell-activity\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\">Quantifying Cell Activity<a class=\"headerlink\" href=\"#quantifying-cell-activity\" title=\"Link to this heading\">#</a></h1><p>The gold-standard formula for measuring cellular activity is \u201cDelta F over F\u2080\u201d, or the change in fluorescence intensity normalized by the baseline activity:</p>", "a[href=\"#fig-dff-dff\"]": "<figure class=\"full-width align-default\" id=\"fig-dff-dff\">\n<img alt=\"Resulting DFF values from baseline strategies\" src=\"_images/dff_baseline_strategies_dff.png\"/>\n<figcaption>\n<p><span class=\"caption-text\">The resulting \u0394F/F\u2080 traces can look different depending on the chosen baseline strategy.</span><a class=\"headerlink\" href=\"#fig-dff-dff\" title=\"Link to this image\">#</a></p>\n</figcaption>\n</figure>", "a[href=\"#fig-dff-strategies\"]": "<figure class=\"full-width align-default\" id=\"fig-dff-strategies\">\n<img alt=\"Comparison of dF/F baseline strategies\" src=\"_images/dff_baseline_strategies2.png\"/>\n<figcaption>\n<p><span class=\"caption-text\">Comparison of different \u0394F/F\u2080 baseline correction methods across selected cells.</span><a class=\"headerlink\" href=\"#fig-dff-strategies\" title=\"Link to this image\">#</a></p>\n</figcaption>\n</figure>", "a[href=\"#fig-dff-example\"]": "<figure class=\"align-default\" id=\"fig-dff-example\">\n<a class=\"reference internal image-reference\" href=\"_images/dff_1.png\"><img alt=\"Example \u0394F/F trace baseline comparisons\" src=\"_images/dff_1.png\" style=\"width: 600px;\"/>\n</a>\n<figcaption>\n<p><span class=\"caption-text\">Example of \u0394F/F trace showing different baseline choices. Adapted from Fig.\u00a01.</span><a class=\"headerlink\" href=\"#fig-dff-example\" title=\"Link to this image\">#</a></p>\n</figcaption>\n</figure>", "a[href=\"#bg-sub-example\"]": "<div class=\"dropdown admonition\" id=\"bg-sub-example\">\n<p class=\"admonition-title\">Example</p>\n<p><a class=\"reference external\" href=\"https://gcamp6f.com/2021/10/04/large-scale-calcium-imaging-noise-levels/\">This discussion</a>, which details how to calculate noise for a variety of datasets, used traces that had <a class=\"reference external\" href=\"https://github.com/cajal/microns_phase3_nda/issues/21\">the background signal subtracted</a>.</p>\n<p>This happens because CaImAn subtracts the background signal from each neuron under the hood.\nThe resulting units are no longer raw signal, they are background-subtracted raw-signal.\nThis process reduces the baseline F\u2080 to nearly zero and heavily skew \u0394F/F\u2080 calculations.</p>\n</div>", "a[href=\"#pipelines\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Pipelines<a class=\"headerlink\" href=\"#pipelines\" title=\"Link to this heading\">#</a></h2><p>There are several pipelines for users to choose from when deciding how to process calcium imaging datasets.\nOften times, the outputs of these pipelines are in units that are not well documented.\nEven worse, the <em>inputs</em> to downstream pipelines pipelines require data to have particular units.</p>", "a[href=\"#extract\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\"><a class=\"reference external\" href=\"https://github.com/schnitzer-lab/EXTRACT-public?tab=readme-ov-file\">EXTRACT</a><a class=\"headerlink\" href=\"#extract\" title=\"Link to this heading\">#</a></h3><p>EXTRACT outputs raw fluorescence signals without built-in \u0394F/F\u2080 calculation. You compute it yourself using something like a low-percentile (e.g. 10%) as F\u2080. Most people use a global or sliding percentile window.</p><p><strong>Neuropil:</strong> Handled implicitly. The algorithm uses robust factorization to ignore background and neuropil. There\u2019s no explicit subtraction or coefficient to tune. It isolates only what fits a consistent spatial footprint and suppresses outliers by design.</p>", "a[href=\"#calculating-f-f\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Calculating \u0394F/F<a class=\"headerlink\" href=\"#calculating-f-f\" title=\"Link to this heading\">#</a></h2><p>The most important consideration you must consider is how you calculate your baseline activity, which depends on your experimental question.</p>", "a[href=\"#suite2p\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\"><a class=\"reference external\" href=\"https://github.com/MouseLand/suite2p/tree/main\">Suite2p</a><a class=\"headerlink\" href=\"#suite2p\" title=\"Link to this heading\">#</a></h3><p>Suite2p does <strong>not</strong> output traces in \u0394F/F\u2080 format directly.</p><p>Instead, it gives you the raw trace and the neuropil, along with spike estimates if you ran <a class=\"reference external\" href=\"https://suite2p.readthedocs.io/en/latest/deconvolution.html\">deconvolution</a>.\nThe neuropil represents fluorescence from the surrounding non-somatic tissue.\nAs an optional step, many experimentors apply a fixed subtraction:</p>", "a[href=\"#references\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">References<a class=\"headerlink\" href=\"#references\" title=\"Link to this heading\">#</a></h2>", "a[href=\"#indicator-dynamics\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Indicator Dynamics<a class=\"headerlink\" href=\"#indicator-dynamics\" title=\"Link to this heading\">#</a></h2>"}
skip_classes = ["headerlink", "sd-stretched-link"]

window.onload = function () {
    for (const [select, tip_html] of Object.entries(selector_to_html)) {
        const links = document.querySelectorAll(` ${select}`);
        for (const link of links) {
            if (skip_classes.some(c => link.classList.contains(c))) {
                continue;
            }

            tippy(link, {
                content: tip_html,
                allowHTML: true,
                arrow: true,
                placement: 'auto-start', maxWidth: 500, interactive: false,

            });
        };
    };
    console.log("tippy tips loaded!");
};
